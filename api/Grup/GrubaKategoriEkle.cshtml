@{
    
    if (!WebSecurity.IsAuthenticated)
   
    {
        Response.StatusCode = 401;
        Response.End();
                   
    }  
 var GrupID=Request["GrupID"];
 var KategoriID=Request["KategoriID"];
 var db=Database.Open("veritabani");
 
 if (db.QueryValue("SELECT COUNT(*) FROM Grup_HangiKategori WHERE GrupID=@0 AND KategoriID=@1 AND (GrupID IN (Select GrupID FROM Grup_Yonetici WHERE UserID=@2))",GrupID,KategoriID,WebSecurity.CurrentUserId)<1)
 {
    db.Execute("INSERT INTO Grup_HangiKategori(GrupID,KategoriID) VALUES(@0,@1)",GrupID,KategoriID);
 }
 db.Close();
Response.StatusCode = 200;
 Response.End();        
}
