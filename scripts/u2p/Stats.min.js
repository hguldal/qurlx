$(function(){function t(){var t=$("#tarihAraligi").attr("data-baYil"),e=$("#tarihAraligi").attr("data-baAy"),s=$("#tarihAraligi").attr("data-baGun"),o=$("#tarihAraligi").attr("data-biYil"),l=$("#tarihAraligi").attr("data-biAy"),n=$("#tarihAraligi").attr("data-biGun"),u=$("#txtKisaKod").attr("data-Kisakod"),b="",y=$("#grafikDiv").attr("data-Grafik"),h=$("#grafikDiv").attr("data-CihazTuru");r.destroy(),i.series=[],i.xAxis.categories=[],"ulke"==y?(b="/Ajax/stats/UlkeyeGore?kisaKod="+u+"&baYil="+t+"&baAy="+e+"&baGun="+s+"&biYil="+o+"&biAy="+l+"&biGun="+n+"&cihaz="+h,i.title.text="Visitor by Country",i.yAxis.title.text="Visitor",i.chart.type="column",i.xAxis.categories.push("Countries")):"gun"==y?(b="/Ajax/stats/GunlereGore?kisaKod="+u+"&baYil="+t+"&baAy="+e+"&baGun="+s+"&biYil="+o+"&biAy="+l+"&biGun="+n+"&cihaz="+h,i.series=[{name:"Visitor",data:[]}],i.title.text="Visitor by Day",i.yAxis.title.text="Visitor",i.chart.type="line"):"ay"==y?(b="/Ajax/stats/AylaraGore?kisaKod="+u+"&baYil="+t+"&baAy="+e+"&baGun="+s+"&biYil="+o+"&biAy="+l+"&biGun="+n+"&cihaz="+h,i.series=[{name:"Visitor",data:[]}],i.title.text="Visitor by Month",i.yAxis.title.text="Visitor",i.chart.type="line"):"yil"==y?(b="/Ajax/stats/YillaraGore?kisaKod="+u+"&baYil="+t+"&baAy="+e+"&baGun="+s+"&biYil="+o+"&biAy="+l+"&biGun="+n+"&cihaz="+h,i.series=[{name:"Visitor",data:[]}],i.title.text="Visitor by Year",i.yAxis.title.text="Visitor",i.chart.type="line"):"saat"==y?(b="/Ajax/stats/SaatlereGore?kisaKod="+u+"&baYil="+t+"&baAy="+e+"&baGun="+s+"&biYil="+o+"&biAy="+l+"&biGun="+n+"&cihaz="+h,i.series=[{name:"Visitor",data:[]}],i.title.text="Visitor by Hour",i.yAxis.title.text="Visitor",i.chart.type="line"):"dil"==y?(b="/Ajax/stats/DillereGore?kisaKod="+u+"&baYil="+t+"&baAy="+e+"&baGun="+s+"&biYil="+o+"&biAy="+l+"&biGun="+n+"&cihaz="+h,i.title.text="Visitor by Language",i.yAxis.title.text="Visitor",i.chart.type="column",i.xAxis.categories.push("Languages")):"tarayici"==y&&(b="/Ajax/stats/TarayicilaraGore?kisaKod="+u+"&baYil="+t+"&baAy="+e+"&baGun="+s+"&biYil="+o+"&biAy="+l+"&biGun="+n+"&cihaz="+h,i.title.text="Visitor by Browser",i.yAxis.title.text="Visitor",i.chart.type="column",i.xAxis.categories.push("Browsers")),$.getJSON(b,function(t){if("ulke"==y)for(var e=0;e<t.length;e++)i.series.push({name:t[e].country_name,data:[t[e].Visitor]});else if("gun"==y)for(var e=0;e<t.length;e++)i.series[0].data.push(t[e].Visitor),i.xAxis.categories.push(t[e].gun);else if("ay"==y)for(var e=0;e<t.length;e++)i.series[0].data.push(t[e].Visitor),i.xAxis.categories.push(a(t[e].ay));else if("yil"==y)for(var e=0;e<t.length;e++)i.series[0].data.push(t[e].Visitor),i.xAxis.categories.push(t[e].yil);else if("saat"==y)for(var e=0;e<t.length;e++)i.series[0].data.push(t[e].Visitor),i.xAxis.categories.push(t[e].saat);else if("dil"==y)for(var e=0;e<t.length;e++)i.series.push({name:t[e].language,data:[t[e].Visitor]});else if("tarayici"==y)for(var e=0;e<t.length;e++)i.series.push({name:t[e].browserName,data:[t[e].Visitor]});r=new Highcharts.Chart(i),$("#grafikDiv").attr("data-Grafik",y)})}function a(t){var a=["January","February","March","April","May","June","July","August","September","October","November","December"];return a[t-1]}var i={yAxis:{title:{text:""},gridLineWidth:1},xAxis:{categories:[]},title:{text:""},chart:{renderTo:"grafikDiv",type:"column",defaultSeriesType:"line"},series:[]},r=new Highcharts.Chart(i);$("#tarihAraligi").daterangepicker({ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract("days",1),moment().subtract("days",1)],"Last 7 Days":[moment().subtract("days",6),moment()],"Last 30 Days":[moment().subtract("days",29),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"This Year":[moment().startOf("year"),moment().endOf("year")]},startDate:moment().subtract("days",29),endDate:moment(),opens:"left"},function(a,i){$("#tarihAraligi").html('<span class="glyphicon glyphicon-calendar"></span> '+a.format("MM/DD/YYYY")+"-"+i.format("MM/DD/YYYY")+' <b class="caret"></b>'),$("#tarihAraligi").attr("data-baYil",a.format("YYYY")),$("#tarihAraligi").attr("data-baAy",a.format("MM")),$("#tarihAraligi").attr("data-baGun",a.format("DD")),$("#tarihAraligi").attr("data-biYil",i.format("YYYY")),$("#tarihAraligi").attr("data-biAy",i.format("MM")),$("#tarihAraligi").attr("data-biGun",i.format("DD")),t()}),$(".grafikTuru").click(function(){var a=$(this).attr("data-tur");$("#grafikDiv").attr("data-Grafik",a),$("#lstGrafikTurleri>li").removeClass("active"),$(this).closest("li").addClass("active"),t()}),$("#cmbCihazTuru").selectize({onItemAdd:function(a){$("#grafikDiv").attr("data-CihazTuru",a),t()}})});